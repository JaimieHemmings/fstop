{% extends 'cp-base.html' %}
{% load humanize %}

{% block extra_title %}
| Home
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-sm-12">
    <div class="row">

      <div class="col-sm-4">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col mt-0">
                <h5>Registered Users</h5>
                <p>All Users</p>
              </div>
              <div class="col-auto">
                <div class="stat text-primary">
                  <i class="align-middle" data-feather="users"></i>
                </div>
              </div>
            </div>
          {% endfor %}
          {% else %}
            <p>No users to display.</p>
          {% endif %}
          <div class="d-flex justify-content-end pt-3 pb-3">
            <a href="#" class="btn btn-secondary disabled mx-3"><s>Manage</s></a>
          </div>
        </div>
      </div>

        
      <div class="col-sm-4">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col mt-0">
                <h5>Total Articles</h5>
                <p>Total Published</p>
              </div>
              <div class="col-auto">
                <div class="stat text-primary">
                  <i class="align-middle" data-feather="file-text"></i>
                </div>
              </div>
            </div>
            <h2 class="mt-1 mb-3">{{ total_articles }}</h2>
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="cp-section-wrapper">
          <h2>Latest Messages</h2>
          <p class="mb-3">Manage Messages</p>
          <hr>
          <ul class="messages-quick">
            {% if latest_messages %}
            {% for message in latest_messages %}
            <li class="message-item">
              <p>{{ message.email }}</p>
              <p>{{ message.created_at }}</p>
            {% endfor %}
            {% else %}
            <li class="message-item">
              <p>No messages to display.</p>
            </li>
            {% endif %}
          </ul>
          <div class="d-flex justify-content-end mb-3">
            <p><a href="{% url 'cp_messages' %}" class="btn btn-primary">View All</a></p>
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="cp-section-wrapper">
          <h2>Reviews</h2>
          <p class="mb-3">Manage Reviews</p>
          <hr>
          <ul>
            {% if latest_reviews %}
            {% for review in latest_reviews %}
            <li> {{ review.name }} - {{ review.company }}</li>
            {% endfor %}
            {% else %}
            <li>
              <p>No reviews to display</p>
            </li>
            {% endif %}
          </ul>
          <div class="d-flex justify-content-end mb-3">
            <p><a href="{% url 'manage_reviews' %}" class="btn btn-primary">View All</a></p>
          </div>
        </div>
      </div>

    </div>
  </div>
  {% include 'partials/dashboard/cp-message-card.html' %}
  {% include 'partials/dashboard/cp-payments-card.html' %}
{% endblock %}