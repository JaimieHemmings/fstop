{% extends 'cp-base.html' %}

{% block extra_title %}
| Home
{% endblock %}

{% block content %}
<section class="container mb-5">
    <div class="row">
      <div class="col-sm-12 text-center pt-5 pb-5">
        <h1>Control Panel</h1>
        <p>Welcome to the control panel. From here you can manage your website.</p>
        <p>Use the menu to navigate to the different sections of the control panel.</p>
        <p class="mt-3">
          <a href="{% url 'home' %}" class="btn btn-primary">
            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m4 12 8-8 8 8M6 10.5V19a1 1 0 0 0 1 1h3v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h3a1 1 0 0 0 1-1v-8.5"/>
            </svg>
            Return to Homepage
          </a>
        </p>
      </div>
    </div>

    <div class="row">
      {% include 'partials/quick-stats.html' %}
    </div>

    <div class="row">
      <div class="col-lg-6">
        <div class="cp-section-wrapper">
          <h2>Latest Articles</h2>
          <p class="mb-3">Manage your latest articles.</p>
          <hr>
          {% if latest_articles %}
          <ul>
            {% for article in latest_articles %}
              <li class="d-flex flex-row justify-content-between mb-3">
                <p>{{ article.title }}</p>
                <div class="buttons">
                  <a href="{% url 'edit_article' article.id %}" class="btn btn-secondary">Edit</a>
                  <a href="{% url 'confirm_delete_article' article.id %}" class="btn btn-danger">Delete</a>
                </div>                
              </li>
            {% endfor %}
          </ul>
          {% else %}
            <p>No articles to display.</p>
          {% endif %}
          <div class="d-flex justify-content-end pt-3 pb-3">
            <a href="{% url 'add_article' %}" class="btn btn-success mx-3">Create Article</a>
            <a href="{% url 'cp_articles' %}" class="btn btn-primary">Go to Articles</a>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="cp-section-wrapper">
          <h2>Latest Users</h2>
          <p class="mb-3">Manage Users</p>
          <hr>
          {% if latest_users %}
          {% for user in latest_users %}
            <div class="d-flex flex-row justify-content-between mb-3">
              <p>{{ user.username }}</p>
              <p>{{ user.date_joined }}</p>              
            </div>
          {% endfor %}
          {% else %}
            <p>No users to display.</p>
          {% endif %}
          <div class="d-flex justify-content-end pt-3 pb-3">
            <a href="#" class="btn btn-secondary disabled mx-3"><s>Manage</s></a>
          </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="cp-section-wrapper">
          <h2>Most Recent Payment Requests</h2>
          <p class="mb-3">Manage Payment Requests</p>
          <hr>
          <ul>
            <li>Add things here</li>
          </ul>
          <div class="d-flex justify-content-end pt-3 pb-3">
            <a href="#" class="btn btn-success mx-3">Create New</a>
            <a href="#" class="btn btn-primary">View All</a>
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="cp-section-wrapper">
          <h2>Latest Messages</h2>
          <p class="mb-3">Manage Messages</p>
          <hr>
          <ul class="messages-quick">
            {% if latest_messages %}
            {% for message in latest_messages %}
            <li class="message-item">
              <p>{{ message.email }}</p>
              <p>{{ message.created_at }}</p>
            {% endfor %}
            {% else %}
            <li class="message-item">
              <p>No messages to display.</p>
            </li>
            {% endif %}
          </ul>
          <div class="d-flex justify-content-end mb-3">
            <p><a href="{% url 'cp_messages' %}" class="btn btn-primary">View All</a></p>
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="cp-section-wrapper">
          <h2>Reviews</h2>
          <p class="mb-3">Manage Reviews</p>
          <hr>
          <ul>
            {% if latest_reviews %}
            {% for review in latest_reviews %}
            <li> {{ review.name }} - {{ review.company }}</li>
            {% endfor %}
            {% else %}
            <li>
              <p>No reviews to display</p>
            </li>
            {% endif %}
          </ul>
          <div class="d-flex justify-content-end mb-3">
            <p><a href="{% url 'manage_reviews' %}" class="btn btn-primary">View All</a></p>
          </div>
        </div>
      </div>
    </div>
</section>
{% endblock %}